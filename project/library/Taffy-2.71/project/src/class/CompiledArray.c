//
// This file is part of Taffy, a mathematical programming language.
// Copyright (C) 2016-2017 Arithmagic, LLC
//
// Taffy is free software: you can redistribute it and/or modify
// it under the terms of the GNU Lesser General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// Taffy is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU Lesser General Public License for more details.
//
// You should have received a copy of the GNU Lesser General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.
//

const char *__compiledArray =    "package org.taffy.core.container\n"
    "\n"
    "class Array(LineContainer)\n"
    "{\n"
    "@protected\n"
    "    (@) indexHelper: _object\n"
    "              last?: _last\n"
    "    #const,\n"
    "    #containerLoop\n"
    "    {\n"
    "        index = -1\n"
    "        size = [self size]\n"
    "\n"
    "        for (a = 0; a < size; a++)\n"
    "        {\n"
    "            if (self[a] == _object)\n"
    "            {\n"
    "                index = a\n"
    "\n"
    "                if (! _last)\n"
    "                {\n"
    "                    break\n"
    "                }\n"
    "            }\n"
    "        }\n"
    "\n"
    "        return (index)\n"
    "    }\n"
    "\n"
    "    (@) arithmeticWithObject: _object\n"
    "                    operator: _operator\n"
    "    #containerLoop\n"
    "    {\n"
    "        result = [Array createWithSize: [self size]]\n"
    "\n"
    "        self eachIndex: ^{ <_index>\n"
    "            result[_index] = [kernel eval: \"upSelf[_index] #[_operator] _object\"]\n"
    "        }\n"
    "\n"
    "        return result\n"
    "    }\n"
    "\n"
    "    (@) assignmentArithmeticWithObject: _object\n"
    "                              operator: _operator\n"
    "    #containerLoop\n"
    "    {\n"
    "        self eachIndex: ^{ <_index>\n"
    "            upSelf[_index] = [kernel eval: \"upSelf[_index] #[_operator] _object\"]\n"
    "        }\n"
    "\n"
    "        return self\n"
    "    }\n"
    "\n"
    "    (@) arithmeticWithOperator: _operator\n"
    "    #containerLoop\n"
    "    {\n"
    "        result = [Array createWithSize: [self size]]\n"
    "\n"
    "        self eachIndex: ^{ <_index>\n"
    "            result[_index] = [kernel eval: \"upSelf[_index] #[_operator]\"]\n"
    "        }\n"
    "\n"
    "        return result\n"
    "    }\n"
    "\n"
    "    (@) arithmeticWithSettingOperator: _operator\n"
    "    #containerLoop\n"
    "    {\n"
    "        self eachIndex: ^{ <_index>\n"
    "            upSelf[_index] = [kernel eval: \"upSelf[_index] #[_operator]\"]\n"
    "        }\n"
    "\n"
    "        return self\n"
    "    }\n"
    "\n"
    "    (@) quicksortLow: _low high: _high\n"
    "    {\n"
    "        if (_low < _high)\n"
    "        {\n"
    "            partition = [self partitionLow: _low high: _high]\n"
    "            [self quicksortLow: _low high: partition - 1]\n"
    "            [self quicksortLow: partition + 1 high: _high]\n"
    "        }\n"
    "    }\n"
    "\n"
    "    (@) partitionLow: _low high: _high\n"
    "    {\n"
    "        pivot = self[_high]\n"
    "        a = _low\n"
    "\n"
    "        for (j = _low; j < _high; j++)\n"
    "        {\n"
    "            if (self[j] <= pivot)\n"
    "            {\n"
    "                [self swapIndex: a withIndex: j]\n"
    "                a++\n"
    "            }\n"
    "        }\n"
    "\n"
    "        [self swapIndex: a withIndex: _high]\n"
    "        return a\n"
    "    }\n"
    "\n"
    "@public\n"
    "    (@) lastIndexOf: _object\n"
    "    {\n"
    "        return ([self indexHelper: _object last?: true])\n"
    "    }\n"
    "\n"
    "    (@) indexOf: _object\n"
    "    {\n"
    "        return ([self indexHelper: _object last?: false])\n"
    "    }\n"
    "\n"
    "    (@) vectorize: _function\n"
    "    #containerLoop\n"
    "    {\n"
    "        result = [Array createWithSize: [self size]]\n"
    "\n"
    "        self eachIndex: ^{ <_index>\n"
    "            result[_index] = _function(upSelf[_index])\n"
    "        }\n"
    "\n"
    "        return result\n"
    "    }\n"
    "\n"
    "    (@) vectorize!: _function\n"
    "    #containerLoop\n"
    "    {\n"
    "        self eachIndex: ^{ <_index>\n"
    "            upSelf[_index] = _function(upSelf[_index])\n"
    "        }\n"
    "\n"
    "        return self\n"
    "    }\n"
    "\n"
    "    (@) #operator(*): _object\n"
    "    {\n"
    "        return [self arithmeticWithObject: _object operator: \"*\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(/): _object\n"
    "    {\n"
    "        return [self arithmeticWithObject: _object operator: \"/\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(+): _object\n"
    "    {\n"
    "        return [self arithmeticWithObject: _object operator: \"+\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(-): _object\n"
    "    {\n"
    "        return [self arithmeticWithObject: _object operator: \"-\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(^): _object\n"
    "    {\n"
    "        return [self arithmeticWithObject: _object operator: \"^\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(<<): _object\n"
    "    {\n"
    "        return [self arithmeticWithObject: _object operator: \"<<\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(>>): _object\n"
    "    {\n"
    "        return [self arithmeticWithObject: _object operator: \">>\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(%): _object\n"
    "    {\n"
    "        return [self arithmeticWithObject: _object operator: \"%\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(&): _object\n"
    "    {\n"
    "        return [self arithmeticWithObject: _object operator: \"&\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(|): _object\n"
    "    {\n"
    "        return [self arithmeticWithObject: _object operator: \"|\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(^^): _object\n"
    "    {\n"
    "        return [self arithmeticWithObject: _object operator: \"^^\"]\n"
    "    }\n"
    "\n"
    "    //\n"
    "    // assignment arithmetic\n"
    "    //\n"
    "    (@) #operator(*=): _object\n"
    "    {\n"
    "        return [self assignmentArithmeticWithObject: _object operator: \"*\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(/=): _object\n"
    "    {\n"
    "        return [self assignmentArithmeticWithObject: _object operator: \"/\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(+=): _object\n"
    "    {\n"
    "        return [self assignmentArithmeticWithObject: _object operator: \"+\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(-=): _object\n"
    "    {\n"
    "        return [self assignmentArithmeticWithObject: _object operator: \"-\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(^=): _object\n"
    "    {\n"
    "        return [self assignmentArithmeticWithObject: _object operator: \"^\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(<<=): _object\n"
    "    {\n"
    "        return [self assignmentArithmeticWithObject: _object operator: \"<<\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(>>=): _object\n"
    "    {\n"
    "        return [self assignmentArithmeticWithObject: _object operator: \">>\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(%=): _object\n"
    "    {\n"
    "        return [self assignmentArithmeticWithObject: _object operator: \"%\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(&=): _object\n"
    "    {\n"
    "        return [self assignmentArithmeticWithObject: _object operator: \"&\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(|=): _object\n"
    "    {\n"
    "        return [self assignmentArithmeticWithObject: _object operator: \"|\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(^^=): _object\n"
    "    {\n"
    "        return [self assignmentArithmeticWithObject: _object operator: \"^^\"]\n"
    "    }\n"
    "\n"
    "    //\n"
    "    // standalone operators\n"
    "    //\n"
    "    (@) #operator(!)\n"
    "    {\n"
    "        return [self arithmeticWithOperator: \"!\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(--)\n"
    "    {\n"
    "        return [self arithmeticWithSettingOperator: \"--\"]\n"
    "    }\n"
    "\n"
    "    (@) #operator(++)\n"
    "    {\n"
    "        return [self arithmeticWithSettingOperator: \"++\"]\n"
    "    }\n"
    "\n"
    "    (@) swapIndex: _index1 withIndex: _index2\n"
    "    {\n"
    "        temp = self[_index1]\n"
    "        self[_index1] = self[_index2]\n"
    "        self[_index2] = temp\n"
    "    }\n"
    "\n"
    "    (@) sort\n"
    "    {\n"
    "        copy = [self copy]\n"
    "        return [copy sort!]\n"
    "    }\n"
    "\n"
    "    (@) sort!\n"
    "    {\n"
    "        self quicksortLow: 0 high: ([self size] - 1)\n"
    "        return self\n"
    "    }\n"
    "}\n"
;