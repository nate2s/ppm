//
// This file is part of Taffy, a mathematical programming language.
// Copyright (C) 2016-2017 Arithmagic, LLC
//
// Taffy is free software: you can redistribute it and/or modify
// it under the terms of the GNU Lesser General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// Taffy is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU Lesser General Public License for more details.
//
// You should have received a copy of the GNU Lesser General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.
//

const char *__compiledHash =    "package org.taffy.core.container\n"
    "\n"
    "import org.taffy.core.String\n"
    "\n"
    "class Hash(Container)\n"
    "{\n"
    "    ////////////////////////////////////////////////////////////////////////////\n"
    "    //\n"
    "    // Hash # #operator(==):\n"
    "    //\n"
    "    // Tests the equality of two hashes. Returns false if either argument is not\n"
    "    // a Hash\n"
    "    //\n"
    "    // h1 = (1=>\"one\", 2=>\"two\")\n"
    "    // h2 = (1=>\"one\", 2=>\"two\")\n"
    "    // h3 = (1=>\"one\")\n"
    "    //\n"
    "    // h1 == h2\n"
    "    // ==> yes\n"
    "    //\n"
    "    // h2 == h3\n"
    "    // ==> no\n"
    "    //\n"
    "    ////////////////////////////////////////////////////////////////////////////\n"
    "    (@) #operator(==): _other\n"
    "    #const,\n"
    "    #synchronizedRead\n"
    "    {\n"
    "        result = false\n"
    "\n"
    "        if ([_other kindOf?: Hash]\n"
    "            and [self size] == [_other size])\n"
    "        {\n"
    "            result = true\n"
    "\n"
    "            [self eachKey: ^{ <key>\n"
    "                if ([_other objectForKey: key]\n"
    "                    != [self objectForKey: key])\n"
    "                {\n"
    "                    result = false\n"
    "                    break\n"
    "                }\n"
    "            }]\n"
    "        }\n"
    "\n"
    "        return (result)\n"
    "    }\n"
    "\n"
    "    ////////////////////////////////////////////////////////////////////////////\n"
    "    //\n"
    "    // Hash#\"as flat Array\"\n"
    "    //\n"
    "    // Converts self to an Array of single objects\n"
    "    //\n"
    "    // h1 = (1=>\"one\", 2=>\"two\")\n"
    "    // h1 as Array\n"
    "    // ==> [1, \"one\", 2, \"two\"]\n"
    "    //\n"
    "    ////////////////////////////////////////////////////////////////////////////\n"
    "    (@) asFlatArray\n"
    "    #const,\n"
    "    #synchronizedRead\n"
    "    {\n"
    "        result = [Array createWithSize: [self size] * 2]\n"
    "        k = 0\n"
    "\n"
    "        [self each: ^{ <pair>\n"
    "            result[k] = [pair left]\n"
    "            result[k + 1] = [pair right]\n"
    "            k += 2\n"
    "        }]\n"
    "\n"
    "        return (result)\n"
    "    }\n"
    "\n"
    "    ////////////////////////////////////////////////////////////////////////////\n"
    "    //\n"
    "    // Hash#\"as Array\"\n"
    "    //\n"
    "    // Converts self to an Array of Pairs\n"
    "    //\n"
    "    // h1 = (1=>\"one\", 2=>\"two\")\n"
    "    // h1 as Array\n"
    "    // ==> [<1,\"one\">,<2,\"two\">]\n"
    "    //\n"
    "    ////////////////////////////////////////////////////////////////////////////\n"
    "    (@) asArray\n"
    "    #const,\n"
    "    #synchronizedRead\n"
    "    {\n"
    "        result = [Array createWithSize: [self size]]\n"
    "        k = 0\n"
    "\n"
    "        [self each: ^{ <pair>\n"
    "            result[k] = pair\n"
    "            k++\n"
    "        }]\n"
    "\n"
    "        return (result)\n"
    "    }\n"
    "\n"
    "    ////////////////////////////////////////////////////////////////////////////\n"
    "    //\n"
    "    // Hash#\"asStringInitialized\"\n"
    "    //\n"
    "    // Returns a String representation of the initialized hash\n"
    "    //\n"
    "    // h1 = (1=>\"one\")\n"
    "    // h1 asStringInitialized\n"
    "    // ==> \"#Hash(1=>\"one\")\"\n"
    "    //\n"
    "    ////////////////////////////////////////////////////////////////////////////\n"
    "    (@) asStringInitialized\n"
    "    #const,\n"
    "    #synchronizedRead\n"
    "    {\n"
    "        result = \"#Hash(\"\n"
    "        a = 0\n"
    "        size = [self size]\n"
    "\n"
    "        [self each: ^{ <pair>\n"
    "            result += (\"#[[String prettyPrint: [pair left]]]\"\n"
    "                       + \"=>#[[String prettyPrint: [pair right]]]\")\n"
    "\n"
    "            if (a < size - 1)\n"
    "            {\n"
    "                result += \", \"\n"
    "            }\n"
    "\n"
    "            a++\n"
    "        }]\n"
    "\n"
    "        result += \")\"\n"
    "        return (result)\n"
    "    }\n"
    "\n"
    "    ////////////////////////////////////////////////////////////////////////////\n"
    "    //\n"
    "    // Hash#\"hash\"\n"
    "    //\n"
    "    // Returns the hashed value of this hash\n"
    "    //\n"
    "    // h = (1=>\"one\", 2=>\"two\")\n"
    "    // h hash\n"
    "    // ==> 2165800\n"
    "    //\n"
    "    ////////////////////////////////////////////////////////////////////////////\n"
    "    (@) hash\n"
    "    #const,\n"
    "    #synchronizedRead\n"
    "    {\n"
    "        result = 0\n"
    "        a = 0\n"
    "\n"
    "        [self each: ^{ <pair>\n"
    "            result += ([pair hash] << (a + 10))\n"
    "            result = mod(result, 0xFFFFFFFF)\n"
    "            a++\n"
    "        }]\n"
    "\n"
    "        return (result)\n"
    "    }\n"
    "\n"
    "    ////////////////////////////////////////////////////////////////////////////\n"
    "    //\n"
    "    // Hash#\"values\"\n"
    "    //\n"
    "    // Returns the values of the hash\n"
    "    //\n"
    "    // h = (1=>\"one\", 2=>\"two\")\n"
    "    // h values\n"
    "    // ==> [\"one\",\"two\"]\n"
    "    //\n"
    "    ////////////////////////////////////////////////////////////////////////////\n"
    "    (@) values\n"
    "    #const,\n"
    "    #synchronizedRead\n"
    "    {\n"
    "        result = [Array createWithSize: [self size]]\n"
    "        k = 0\n"
    "\n"
    "        [self eachValue: ^{ <value>\n"
    "            result[k] = value\n"
    "            k++\n"
    "        }]\n"
    "\n"
    "        return (result)\n"
    "    }\n"
    "\n"
    "    ////////////////////////////////////////////////////////////////////////////\n"
    "    //\n"
    "    // Hash#\"keys\"\n"
    "    //\n"
    "    // Returns the keys of the hash\n"
    "    //\n"
    "    // h = (1=>\"one\", 2=>\"two\")\n"
    "    // h keys\n"
    "    // ==> [1,2]\n"
    "    //\n"
    "    ////////////////////////////////////////////////////////////////////////////\n"
    "    (@) keys\n"
    "    #const,\n"
    "    #synchronizedRead\n"
    "    {\n"
    "        result = [Array createWithSize: [self size]]\n"
    "        k = 0\n"
    "\n"
    "        [self eachKey: ^{ <key>\n"
    "            result[k] = key\n"
    "            k++\n"
    "        }]\n"
    "\n"
    "        return (result)\n"
    "    }\n"
    "}\n"
;